# Tmux Solarized Fix - Found from:
# http://superuser.com/questions/401668/solarized-background-colour-off-in-emacs-under-tmux
# screen-256color allows ^S in vim where xterm-256color Blocks ^S in vim
set -g default-terminal "screen-256color"
set-option -g base-index 1
set-window-option -g pane-base-index 1

# On MacOSX you need this in tmux session to stop odd behavior.
# Add this line to your `.tmux.conf.local`
# set -g default-command "reattach-to-user-namespace -l bash"

unbind-key C-b
set-option -g prefix C-Space
bind-key Space last-window
bind-key C-Space last-window
bind-key b copy-mode
bind-key v copy-mode

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# smart pane switching with awareness of vim splits
bind-key -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq 'vim\\|git' && tmux send-keys C-h) || tmux select-pane -L"
bind-key -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq 'vim\\|git' && tmux send-keys C-j) || tmux select-pane -D"
bind-key -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq 'vim\\|git' && tmux send-keys C-k) || tmux select-pane -U"
bind-key -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq 'vim\\|git' && tmux send-keys C-l) || tmux select-pane -R"
# bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq 'vim\\|git' && tmux send-keys 'C-\\') || tmux select-pane -l"

bind-key J command-prompt -p "Join pane from (hoz):"  "join-pane -s '%%'"
bind-key C-j command-prompt -p "Join pane from (vert):"  "join-pane -v -s '%%'"
bind-key S command-prompt -p "Send pane to (hoz):"  "join-pane -t '%%'"
bind-key C-s command-prompt -p "Send pane to (vert):"  "join-pane -v -t '%%'"
#unbind-key % # Remove default binding since weâ€™re replacing
bind-key r source-file ~/.tmux.conf
bind-key C-q command-prompt -p "Switch to session:" "switch-client -t '%%'"

# Copy mode
#set-window-option -g xterm-keys on
setw -g mode-keys vi
# unbind-key [
unbind-key p
bind-key p paste-buffer
bind-key Enter paste-buffer
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-selection
bind-key -t vi-copy V rectangle-toggle
bind-key -t vi-copy Escape cancel
# This is a MAC OS X specific command. However I don't know of other systems
# that have something simular.
bind-key y run "tmux save-buffer - | reattach-to-user-namespace pbcopy"
bind-key C-e run "~/.bin/tmuxemoji"

# Fix for missing default-path option. (Removed in tmux v1.9)
bind-key "'" split-window -c "#{pane_current_path}"
bind-key '"' split-window -h -c "#{pane_current_path}"
bind-key % split-window -h -c "#{pane_current_path}"
bind-key c new-window -c "#{pane_current_path}"

# Resize'n
bind-key ^ command-prompt -p "Set pane width (hoz):"  "resize-pane -x '%%'"
bind-key _ command-prompt -p "Set pane height (vert):"  "resize-pane -y '%%'"

set -g mode-mouse on
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on
setw -g aggressive-resize on

set-option -g display-time 4000
set-option -g status-utf8 on
set -g status-bg black
set -g status-fg green
set -g status-left-length 40
set -g status-left '#[fg=cyan,bright]#10H#[fg=green]:#[fg=white]#S#[fg=green] #[default]'
set -g status-right ' #[fg=yellow]%y-%m-%d %H:%M '
set -g status-justify centre

set -sg escape-time 0

# Zoom - Found from:
# http://superuser.com/questions/238702/maximizing-a-pane-in-tmux#answer-433702
# unbind-key z
# bind-key z run ". ~/.tmux/zoom"

source-file "$HOME/.tmux.conf.local"
